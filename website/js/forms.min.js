'use strict';const FormValidator={patterns:{email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^[+]?[\d\s()-]{10,}$/,name:/^[\p{L}\s'-]{2,}$/u},messages:{required:'Please fill this field',email:'Please enter a valid email (e.g., name@company.com)',phone:'Please enter a valid phone number (10+ digits)',name:'Please enter your full name',select:'Please select an option',minLength:e=>`Please enter at least ${e} characters`,maxLength:e=>`Please keep it under ${e} characters`,file:'Please upload a valid file (PDF or Word, max 5MB)'},successMessages:{consultation:{title:'Request Received',text:'Thank you for reaching out. We will contact you within 24 hours to schedule your consultation.'},testimonial:{title:'Thank You',text:'We appreciate you taking the time to share your experience. Your testimonial will be reviewed and published soon.'},application:{title:'Application Submitted',text:'Thank you for your interest in joining our team. We will review your application and get back to you within 5 business days.'},newsletter:{title:'Subscribed',text:'You have been added to our mailing list. We will send you updates on legal developments and firm news.'},default:{title:'Submitted Successfully',text:'Thank you for your message. We will get back to you soon.'}},init(){document.querySelectorAll('form[data-validate]').forEach(e=>{this.setupForm(e)})},setupForm(e){e.setAttribute('novalidate','');e.addEventListener('submit',t=>{t.preventDefault();this.validateForm(e)&&this.handleSubmit(e)});e.querySelectorAll('input, textarea, select').forEach(t=>{t.addEventListener('blur',()=>this.validateField(t));t.addEventListener('input',()=>{t.classList.contains('form-input--error')&&this.validateField(t)})})},validateForm(e){let t=!0;e.querySelectorAll('input, textarea, select').forEach(n=>{this.validateField(n)||(t=!1)});return t},validateField(e){const t=e.value.trim(),n=this.getFieldRules(e);let o=null;if(n.required&&!t)o=e.tagName==='SELECT'?this.messages.select:this.messages.required;else if(t){if(n.type==='email'&&!this.patterns.email.test(t))o=this.messages.email;else if((n.type==='tel'||n.type==='phone')&&!this.patterns.phone.test(t))o=this.messages.phone;else if(n.minLength&&t.length<n.minLength)o=this.messages.minLength(n.minLength);else if(n.maxLength&&t.length>n.maxLength)o=this.messages.maxLength(n.maxLength)}this.showFieldError(e,o);return!o},getFieldRules(e){return{required:e.hasAttribute('required'),type:e.type||e.dataset.type,minLength:parseInt(e.getAttribute('minlength'))||null,maxLength:parseInt(e.getAttribute('maxlength'))||null}},showFieldError(e,t){const n=e.closest('.form-group');let o=n?.querySelector('.form-error');if(t){e.classList.add('form-input--error');e.setAttribute('aria-invalid','true');if(!o&&n){o=document.createElement('span');o.className='form-error';o.setAttribute('role','alert');n.appendChild(o)}o&&(o.textContent=t)}else{e.classList.remove('form-input--error');e.removeAttribute('aria-invalid');o&&o.remove()}},handleSubmit(e){const t=e.querySelector('button[type="submit"]'),n=t?.textContent;t&&(t.disabled=!0,t.textContent='Sending...');const o=new FormData(e);console.log('Form submitted:',Object.fromEntries(o.entries()));setTimeout(()=>{this.showSuccess(e);t&&(t.disabled=!1,t.textContent=n)},1e3)},getFormType(e){const t=window.location.pathname;if(t.includes('contact')||e.querySelector('[name="case_type"]'))return'consultation';if(t.includes('testimonial')||e.querySelector('[name="testimonial"]'))return'testimonial';if(t.includes('join')||e.querySelector('[name="position"]')||e.querySelector('[name="resume"]'))return'application';if(e.querySelector('[name="newsletter"]')||e.classList.contains('newsletter-form'))return'newsletter';return'default'},showSuccess(e){const t=this.getFormType(e),n=this.successMessages[t]||this.successMessages.default,o=document.createElement('div');o.className='form-success';o.setAttribute('role','status');o.innerHTML=`<i data-lucide="check-circle"></i><h3>${n.title}</h3><p>${n.text}</p>`;e.reset();e.style.display='none';e.parentNode.insertBefore(o,e.nextSibling);typeof lucide!=='undefined'&&lucide.createIcons()}};document.addEventListener('DOMContentLoaded',()=>{FormValidator.init()});
