'use strict';const Disclaimer={STORAGE_KEY:'dmajumdar_disclaimer_accepted',EXPIRY_DAYS:30,init(){const e=document.getElementById('disclaimer-overlay');if(!e)return;if(this.isAccepted()){e.hidden=!0;return}e.hidden=!1;document.body.style.overflow='hidden';const t=document.getElementById('disclaimer-accept');t&&t.addEventListener('click',()=>this.accept(e))},isAccepted(){const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return!1;const{timestamp:t}=JSON.parse(e);return Date.now()-t<this.EXPIRY_DAYS*24*60*60*1e3},accept(e){localStorage.setItem(this.STORAGE_KEY,JSON.stringify({timestamp:Date.now()}));e.hidden=!0;document.body.style.overflow=''}};const MobileNav={init(){const e=document.querySelector('.header__mobile-toggle'),t=document.querySelector('.header__nav');if(!e||!t)return;e.addEventListener('click',()=>{const n=t.classList.toggle('header__nav--open');e.setAttribute('aria-expanded',n);document.body.style.overflow=n?'hidden':''});t.querySelectorAll('.header__nav-link').forEach(n=>{n.addEventListener('click',()=>{t.classList.remove('header__nav--open');e.setAttribute('aria-expanded','false');document.body.style.overflow=''})})}};const StickyHeader={init(){const e=document.querySelector('.header');if(!e)return;window.addEventListener('scroll',()=>{e.classList.toggle('header--scrolled',window.scrollY>50)},{passive:!0})}};const SmoothScroll={init(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener('click',t=>{const n=e.getAttribute('href');if(n==='#')return;const o=document.querySelector(n);if(!o)return;t.preventDefault();const i=document.querySelector('.header')?.offsetHeight||0;window.scrollTo({top:o.getBoundingClientRect().top+window.scrollY-i,behavior:'smooth'})})})}};const Icons={init(){typeof lucide!=='undefined'&&lucide.createIcons()}};const LanguageToggle={init(){const e=document.querySelectorAll('.lang-toggle__btn');if(!e.length)return;const t=document.getElementById('testimonials-en'),n=document.getElementById('testimonials-bn');if(!t||!n)return;e.forEach(o=>{o.addEventListener('click',()=>{e.forEach(i=>{i.classList.remove('lang-toggle__btn--active');i.setAttribute('aria-selected','false')});o.classList.add('lang-toggle__btn--active');o.setAttribute('aria-selected','true');if(o.dataset.lang==='bn'){t.hidden=!0;n.hidden=!1}else{t.hidden=!1;n.hidden=!0}})})}};const ExitIntent={STORAGE_KEY:'dmajumdar_exit_popup_shown',COOLDOWN_HOURS:24,init(){if(!document.body.classList.contains('page-home'))return;if(this.wasRecentlyShown())return;document.addEventListener('mouseout',e=>{e.clientY<10&&e.relatedTarget===null&&this.show()});const e=document.getElementById('exit-popup-close');e&&e.addEventListener('click',()=>this.hide());const t=document.getElementById('exit-popup');t&&t.addEventListener('click',e=>{e.target===t&&this.hide()})},wasRecentlyShown(){const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return!1;const{timestamp:t}=JSON.parse(e);return Date.now()-t<this.COOLDOWN_HOURS*60*60*1e3},show(){const e=document.getElementById('exit-popup');if(!e||e.dataset.shown==='true')return;e.hidden=!1;e.dataset.shown='true';document.body.style.overflow='hidden';localStorage.setItem(this.STORAGE_KEY,JSON.stringify({timestamp:Date.now()}))},hide(){const e=document.getElementById('exit-popup');if(!e)return;e.hidden=!0;document.body.style.overflow=''}};const TestimonialsCarousel={currentIndex:0,autoplayInterval:null,AUTOPLAY_DELAY:5e3,init(){this.track=document.querySelector('.testimonials-carousel__track');this.slides=document.querySelectorAll('.testimonials-carousel__slide');this.prevBtn=document.querySelector('.testimonials-carousel__prev');this.nextBtn=document.querySelector('.testimonials-carousel__next');this.dots=document.querySelectorAll('.testimonials-carousel__dot');if(!this.track||!this.slides.length)return;this.prevBtn?.addEventListener('click',()=>this.prev());this.nextBtn?.addEventListener('click',()=>this.next());this.dots.forEach((e,t)=>{e.addEventListener('click',()=>this.goTo(t))});this.track.addEventListener('mouseenter',()=>this.stopAutoplay());this.track.addEventListener('mouseleave',()=>this.startAutoplay());this.startAutoplay()},goTo(e){this.currentIndex=e;this.currentIndex<0&&(this.currentIndex=this.slides.length-1);this.currentIndex>=this.slides.length&&(this.currentIndex=0);this.track.style.transform=`translateX(${-this.currentIndex*100}%)`;this.dots.forEach((t,n)=>{t.classList.toggle('testimonials-carousel__dot--active',n===this.currentIndex)})},next(){this.goTo(this.currentIndex+1)},prev(){this.goTo(this.currentIndex-1)},startAutoplay(){this.autoplayInterval=setInterval(()=>this.next(),this.AUTOPLAY_DELAY)},stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}};const ScrollAnimations={init(){const e=document.querySelectorAll('[data-animate]');if(!e.length)return;if(!('IntersectionObserver'in window)){e.forEach(n=>n.classList.add('animated'));return}const t=new IntersectionObserver(n=>{n.forEach(o=>{o.isIntersecting&&(o.target.classList.add('animated'),t.unobserve(o.target))})},{threshold:.1,rootMargin:'0px 0px -50px 0px'});e.forEach(n=>t.observe(n))}};document.addEventListener('DOMContentLoaded',()=>{Disclaimer.init();MobileNav.init();StickyHeader.init();SmoothScroll.init();Icons.init();LanguageToggle.init();ExitIntent.init();TestimonialsCarousel.init();ScrollAnimations.init()});
